/**
 * Minicart PayPal-link interception
 * 05.04.2016
 *
 * [ 	Minicart.js is modified - disabled cart-window popup when adding/changeing items;
 * 		html/css theme changed. ]
 *
 * Insert these lines in HTML
 * <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
 * <script src="plugins/minicart/dist/minicart.js"></script>
 * <script src="minicart-customizer.js"></script>
 *
 */
(function(){function k(d){var g=0,a=document.querySelector("#mc-shopcart"),c=document.querySelector("#mc-shopcart-qty"),b={};paypal.minicart.cart.subtotal(b);b=b.currency;paypal.minicart.cart.items().forEach(function(a){g+=a._data.quantity});1==d&&setTimeout(function(){c.fadeTo(200,.25);setTimeout(function(){c.fadeTo(200,1);setTimeout(function(){c.fadeTo(200,.25);setTimeout(function(){c.fadeTo(200,1)},200)},200)},200)},200);var f;"undefined"!==typeof bootstrap?bootstrap.Tooltip.VERSION.startsWith(5)?
(f=bootstrap.Tooltip.getInstance(a))||(f=new bootstrap.Tooltip(a,{title:paypal.minicart.cart.total().toString()+" "+b,trigger:"hover focus",placement:"left"})):f=$(a).tooltip({title:paypal.minicart.cart.total().toString()+" "+b,trigger:"hover focus",placement:"left"}):$.fn.Tooltip&&(f=$(a).tooltip({title:paypal.minicart.cart.total().toString()+" "+b,trigger:"hover focus",placement:"left"}));0<g?(a.fadeTo(200,1),c.innerText=g?g:"","undefined"!==typeof bootstrap?bootstrap.Tooltip.VERSION.startsWith(5)?
f.dispose():f.tooltip("dispose"):$.fn.Tooltip&&f.tooltip("destroy"),"undefined"!==typeof bootstrap?f=bootstrap.Tooltip.VERSION.startsWith(5)?new bootstrap.Tooltip(a,{title:paypal.minicart.cart.total().toString()+" "+b,trigger:"hover focus",placement:"left"}):$(a).tooltip({title:paypal.minicart.cart.total().toString()+" "+b,trigger:"hover focus",placement:"left"}):$.fn.Tooltip&&$(a).tooltip({title:paypal.minicart.cart.subtotal()+" "+b,trigger:"hover focus",placement:"left"})):(c.innerText=g?g:0,a.fadeTo(200,
0),"undefined"!==typeof bootstrap?bootstrap.Tooltip.VERSION.startsWith(5)?f.dispose():f.tooltip("dispose"):$.fn.Tooltip&&f.tooltip("destroy"),"undefined"!==typeof bootstrap?f=bootstrap.Tooltip.VERSION.startsWith(5)?new bootstrap.Tooltip(a,{title:"Cart is Empty",trigger:"hover focus"}):$(a).tooltip({title:"Cart is Empty",trigger:"hover focus",placement:"left"}):$.fn.Tooltip&&$(a).tooltip({title:"Cart is Empty",trigger:"hover focus"}))}function r(c){var b={};decodeURIComponent(c).split("&").forEach(function(a){a=
a.split("=");b[a[0]]=(a[1]||"").replace(/\+/g," ")});return b}function n(){var d;d=window.innerWidth<=c.site_width?c.side_offset:(window.innerWidth-c.site_width)/2+c.side_offset;switch(l){case 0:b.style.left=d+"px";b.style.right="initial";break;case 1:b.style.left="initial",b.style.right=d+"px"}}function t(){if(!p&&document.body){switch(c.shopcart_position){case "left":l=0;break;case "right":l=1;break;default:console.log("Shopcart position (orientation) is wrong");return}paypal.minicart.render({strings:{button:c.checkout_button.replace(),
cartTitle:c.cartTitle}});window.location.href==c.returnURL&&(paypal.minicart.reset(),window.location=window.location.origin+window.location.pathname);var d=document.createElement("div");d.innerHTML=c.shopcartHtml;document.querySelector("body").append(d);d=document.createElement("style");d.innerHTML="#giftcard-to-shopcart {font-size: "+c.gift_icon_size+"px; color: "+c.gift_icon_color+"; background-color: "+c.gift_back_color+"}";document.querySelector("body").append(d);window.addEventListener("resize",
function(){n()});k();document.querySelector("#mc-shopcart").addEventListener("click",function(c){c.stopPropagation();paypal.minicart.view.show();paypal.minicart.view.redraw()});document.addEventListener("click",function(d){var a=d.target.getAttribute("href");if(a&&-1!=a.search("www.paypal.com/cgi-bin/webscr")&&-1!=a.search("cmd=_cart")){d.stopPropagation();d.preventDefault();m=!0;a=r(a.substring(a.indexOf("?")+1));if(!1!==paypal.minicart.cart.add({amount:a.amount,bn:a.bn,business:a.business,currency_code:a.currency_code,
item_name:a.item_name,item_number:a.item_number,shipping:a.shipping,shipping2:a.shipping2,"return":c.returnURL,cancel_return:c.cancel_returnURL,notifyURL:c.notifyURL,on0:a.on0,os0:a.os0,on1:a.on1,os1:a.os1,on2:a.on2,os2:a.os2})&&b){b.fadeTo(200,1);var e=document.createElement("div");e.innerHTML=c.giftCardHtml;e.style.position="relative";document.querySelector("body").append(e);var a=b.offsetTop,h=b.offsetLeft,f=(d.pageX-10-h)/2+h;e.firstChild.style.top=(d.pageY-10-a)/2+a+"px";e.firstChild.style.left=
f+"px";e.firstChild.animate([{top:d.y+"px",left:d.x+"px",width:"50px",height:"50px",fontSize:"35px",padding:"8px"},{top:a+25+"px",left:h+20+"px",width:"21px",height:"21px",fontSize:"15px",padding:"3px"}],{duration:1E3}).onfinish=function(){e&&e.remove();k(!0)}}m=!1}});paypal.minicart.cart.on("change",function(c){m||k(!0)});paypal.minicart.cart.on("remove",function(){k()});b=document.querySelector("#mc-shopcart");b.style.top=c.shopcart_top_offset+"px";b.style.fontSize=c.shopcart_icon_size+"px";b.style.color=
c.shopcart_icon_color;b.style.backgroundColor=c.shopcart_back_color;b.querySelector("span").style.fontSize=c.sc_count_size+"px";b.querySelector("span").style.color=c.sc_count_color;b.querySelector("span").style.backgroundColor=c.sc_count_back_color;d={};paypal.minicart.cart.subtotal(d);d=d.currency;"undefined"!==typeof bootstrap?bootstrap.Tooltip.VERSION.startsWith(5)?new bootstrap.Tooltip(b,{title:paypal.minicart.cart.total().toString()+" "+d,trigger:"hover focus",placement:"left"}):tooltip=$(b).tooltip({title:paypal.minicart.cart.total().toString()+
" "+d,trigger:"hover focus",placement:"left"}):$.fn.Tooltip&&$(b).tooltip({title:paypal.minicart.cart.total().toString()+" "+d,trigger:"hover focus",placement:"left"});shopcartWidth=b.offsetWidth;n();p=!0}}function h(b){for(var g in b)q.hasOwnProperty(g)&&(c[g]=b[g]);document.addEventListener("DOMContentLoaded",function(){t()})}var q={shopcart_position:"right",site_width:1150,side_offset:20,shopcart_top_offset:120,gift_icon_color:"#FFF",gift_back_color:"#f97352",gift_icon_size:15,shopcart_icon_color:"#FFF",
shopcart_back_color:"#000",shopcart_icon_size:50,sc_count_color:"#FFF",sc_count_back_color:"#f97352",sc_count_size:12,returnURL:window.location.origin+window.location.pathname+"?success",cancel_returnURL:window.location.origin+window.location.pathname+"?failure",shopcartCSSLink:'<link rel="stylesheet" href="shopping-cart/minicart-theme.css" type="text/css">',giftCardHtml:'<i id="giftcard-to-shopcart" class="shoppingcart-icons">&#xe308;</i>',shopcartHtml:'<i id="mc-shopcart" role="button" class="shoppingcart-icons" data-bs-toggle="tooltip" data-toggle="tooltip" data-placement="left">&#xe1df;<span id="mc-shopcart-qty"></span></div></i>',
checkout_button:"Pay with",cartTitle:"Your Order:"},c=q,p=!1,m=!1,b,l;Element.prototype.fadeTo=function(c,b){function a(){e.style.display="none"}var e=this;e.style.transitionDuration=c+"ms";e.style.opacity=b;0===b?e.addEventListener("transitionend",a(),{once:!0}):(e.removeEventListener("transitionend",a()),e.style.display="block")};if("undefined"===typeof paypal||"undefined"===typeof paypal.minicart)return-1;window.mcShopcartOptions&&h(window.mcShopcartOptions);"function"===typeof define&&define.amd?
define(function(){return h}):"object"==typeof exports?module.exports=h:window.mcShopcart=h})();mcShopcart("undefined"===typeof shopcartSettings?null:shopcartSettings);
